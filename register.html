<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>JD — Register</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  :root{
    --accent1:#4facfe;
    --accent2:#00f2fe;
    --card:#ffffff;
  }
  body{
    min-height:100vh;
    margin:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background: linear-gradient(135deg,#0f172a 0%, #071028 40%, #001a3d 100%);
    color:#fff;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  .glass {
    width:420px;
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
    border-radius:14px;
    padding:26px;
    box-shadow: 0 10px 30px rgba(2,6,23,0.6);
    border:1px solid rgba(255,255,255,0.06);
    position:relative;
    overflow:hidden;
  }
  h3{font-weight:600}
  .blob {
    position:absolute;
    filter: blur(34px);
    opacity:0.22;
    pointer-events:none;
    z-index:0;
  }
  .b1{ width:220px;height:220px; background: radial-gradient(circle at 30% 30%, var(--accent1), var(--accent2)); top:-40px; left:-60px; transform: rotate(20deg); }
  .b2{ width:140px;height:140px; background: radial-gradient(circle at 20% 20%, #FF8A65, #FF5252); bottom:-30px; right:-40px; transform: rotate(-15deg); }
  label{color:rgba(255,255,255,0.9)}
  .small-muted{font-size:0.9rem;color:rgba(255,255,255,0.65)}
  a.link-light{color:#dff; text-decoration:underline}
  .btn-accent{
    background: linear-gradient(90deg,var(--accent1),var(--accent2));
    border:0;color:#022; font-weight:600;
  }
</style>
</head>
<body>
  <div class="glass">
    <div class="blob b1"></div>
    <div class="blob b2"></div>

    <h3 class="mb-2">Create your JD account</h3>
    <p class="small-muted mb-3">Track calories, proteins, vitamins & minerals — start your fitness journey.</p>

    <form id="registerForm" class="mt-2" autocomplete="off">
      <div class="mb-3">
        <label for="regName" class="form-label">Full name</label>
        <input id="regName" class="form-control" required />
      </div>

      <div class="mb-3">
        <label for="regEmail" class="form-label">Email</label>
        <input id="regEmail" type="email" class="form-control" required />
      </div>

      <div class="mb-3">
        <label for="regPassword" class="form-label">Password</label>
        <input id="regPassword" type="password" class="form-control" minlength="6" required />
        <div class="form-text small-muted">Use at least 6 characters.</div>
      </div>

      <div class="mb-3 row">
        <div class="col">
          <label class="form-label">Age</label>
          <input id="regAge" type="number" min="5" class="form-control" />
        </div>
        <div class="col">
          <label class="form-label">Gender</label>
          <select id="regGender" class="form-select">
            <option value="">Prefer not to say</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
        </div>
      </div>

      <div class="d-grid mb-2">
        <button class="btn btn-accent btn-lg" type="submit">Create account</button>
      </div>

      <div class="text-center small-muted">
        Already a member? <a class="link-light" href="login.html">Login</a>
      </div>
    </form>
  </div>

<script>
  // support multiple users: stored as array under 'jdUsers'
  function loadUsers(){ return JSON.parse(localStorage.getItem('jdUsers')||'[]'); }
  function saveUsers(users){ localStorage.setItem('jdUsers', JSON.stringify(users)); }

  document.getElementById('registerForm').addEventListener('submit', function(e){
    e.preventDefault();
    const name = document.getElementById('regName').value.trim();
    const email = document.getElementById('regEmail').value.trim().toLowerCase();
    const password = document.getElementById('regPassword').value;
    const age = document.getElementById('regAge').value;
    const gender = document.getElementById('regGender').value;

    if(!name || !email || !password){ alert('Please fill required fields'); return; }

    let users = loadUsers();
    if(users.find(u=>u.email === email)){
      alert('⚠️ User with this email already exists. Please login.');
      window.location.href = 'login.html';
      return;
    }

    const user = { id: Date.now(), name, email, password, age, gender, profileImage: null };
    users.push(user);
    saveUsers(users);

    // auto-login by setting logged user
    localStorage.setItem('jdLoggedInUser', JSON.stringify(user));

    // initialize empty activities for this user
    const key = `jd_activities_${email}`;
    if(!localStorage.getItem(key)) localStorage.setItem(key, JSON.stringify([]));

    // redirect to dashboard
    window.location.href = 'dashboard.html';
  });
</script>
</body>
</html>
